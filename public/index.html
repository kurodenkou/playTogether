<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>playTogether</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ══════════════════════════════════════════════════════════════════════════
     LOBBY VIEW
══════════════════════════════════════════════════════════════════════════════ -->
<div id="view-lobby" class="view">
  <div class="lobby-card">
    <h1>playTogether</h1>
    <p class="tagline">JS emulator platform · rollback netcode</p>

    <div class="field-group">
      <label for="playerName">Your name</label>
      <input type="text" id="playerName" placeholder="Player" maxlength="24" autocomplete="off">
    </div>

    <div class="lobby-actions">
      <button id="createRoomBtn" class="primary">Create Room</button>
    </div>

    <div class="lobby-divider">or join existing</div>

    <div class="join-group">
      <input type="text" id="roomCodeInput" placeholder="ROOM CODE" maxlength="6"
             autocomplete="off" spellcheck="false">
      <button id="joinRoomBtn">Join</button>
    </div>

    <div id="status-lobby" class="status hidden"></div>
  </div>
</div>

<!-- ══════════════════════════════════════════════════════════════════════════
     ROOM VIEW
══════════════════════════════════════════════════════════════════════════════ -->
<div id="view-room" class="view hidden">

  <!-- Top bar ──────────────────────────────────────────────────────────── -->
  <div class="room-topbar">
    <span class="logo">playTogether</span>

    <div class="room-code">
      <span class="label">ROOM</span>
      <span id="roomIdDisplay">——</span>
    </div>

    <span class="spacer"></span>
    <span class="player-slot-label" id="playerSlotLabel"></span>
    <button class="danger" id="leaveRoomBtn">Leave</button>
  </div>

  <!-- Body ─────────────────────────────────────────────────────────────── -->
  <div class="room-body">

    <!-- Canvas + stats ─────────────────────────────────────────────────── -->
    <div class="canvas-area">
      <div class="canvas-wrapper">
        <!-- Pre-game overlay -->
        <div id="preGamePanel">
          <h2>Waiting for host</h2>
          <p>Share the room code with a friend. The host starts the game when everyone is ready.</p>
          <div class="controls-hint">
            <strong>Controls</strong><br>
            ↑ / W &nbsp;—&nbsp; Move Up<br>
            ↓ / S &nbsp;—&nbsp; Move Down<br>
            <br>
            First to <strong>7 points</strong> wins.
          </div>
        </div>

        <!-- Game (hidden until started) -->
        <div id="gamePanel" class="hidden">
          <canvas id="gameCanvas"></canvas>
        </div>
      </div>

      <!-- Rollback stats HUD -->
      <div class="stats-hud">
        <span>Frame <b id="hudFrame">—</b></span>
        <span>Confirmed <b id="hudConfirmed">—</b></span>
        <span>Rollbacks <b id="hudRollbacks">—</b></span>
        <span>Max depth <b id="hudMaxDepth">—</b></span>
      </div>
    </div>

    <!-- Side panel ─────────────────────────────────────────────────────── -->
    <div class="side-panel">

      <!-- Players -->
      <div class="panel-section">
        <h3>Players</h3>
        <ul class="player-list" id="playerList"></ul>
      </div>

      <!-- Host controls -->
      <div class="panel-section">
        <h3>Controls</h3>
        <div class="host-controls">
          <button id="startGameBtn" class="primary hidden">Start Game</button>
          <button id="rematchBtn" class="hidden">Rematch</button>
        </div>
      </div>

      <!-- Chat -->
      <div class="panel-section chat-section">
        <h3>Chat</h3>
        <div id="chatLog"></div>
        <div class="chat-input-row">
          <input type="text" id="chatInput" placeholder="Message…" maxlength="300" autocomplete="off">
          <button id="sendChatBtn">↵</button>
        </div>
      </div>

    </div><!-- /side-panel -->
  </div><!-- /room-body -->
</div><!-- /view-room -->

<!-- ── Scripts (order matters: dependencies first) ────────────────────────── -->
<script src="js/rollback.js"></script>
<script src="js/demo-game.js"></script>
<script src="js/network.js"></script>
<script src="js/input.js"></script>
<script src="js/app.js"></script>

</body>
</html>
